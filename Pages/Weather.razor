@page "/weather"
@rendermode InteractiveServer
@inject IJSRuntime JS

@using BlazorApp.Components.Services.Weather.Forecasts.WeatherTable
@using BlazorApp.Services.Weather
@using BlazorApp.Services.Weather.Forecasts;
@using BlazorApp.Services.Weather.Forecasts.Forecast.Models.WeatherData;

@using BlazorApp.Components.Services.Weather.Forecasts;

<PageTitle>Weather</PageTitle>

<h1>Weather</h1>

<p>This component demonstrates showing data.</p>

@code {
    private WeatherData[]? weatherData;

    protected override void OnInitialized()
    {
        weatherData = Forecasts.GetForecasts()?.ToArray();
    }

    private async Task LogForecasts()
    {
        if (weatherData != null)
        {
            await JS.InvokeVoidAsync("console.log", weatherData);
        }
    }
        private async Task LogTest()
        {
            await JS.InvokeVoidAsync("console.log", "Test log from Weather.razor");
        }
}

@if (weatherData == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <button class="btn btn-primary mb-3" @onclick="LogForecasts">
        Log Forecasts to Console
    </button>

        <button class="btn btn-secondary mb-3" @onclick="LogTest">
            Log Test to Console
        </button>

    <WeatherTable WeatherData="weatherData" />
}